<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EBIOS Risk Manager â€“Â AtelierÂ 4</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Shared sidebar for analysis selection and import/export controls -->
    <aside id="sidebar">
      <div class="brand">EBIOSÂ RM</div>
      <div id="analysis-list" class="analysis-list"></div>
      <button id="new-analysis-btn" class="sidebar-btn">+ Nouvelle analyse</button>
      <button id="export-all-btn" class="sidebar-btn">Exporter tout</button>
      <button id="import-btn" class="sidebar-btn">Importer JSON</button>
      <input type="file" id="import-file" accept="application/json" style="display:none" />
    </aside>
    <main id="main">
      <!-- Header with analysis title, sidebar toggle and actions -->
      <header id="header">
        <div class="header-left">
          <button id="sidebar-toggle" class="header-btn">â˜°</button>
          <input id="analysis-title" type="text" placeholder="Titre de l'analyse" />
        </div>
        <div class="header-buttons">
          <button id="export-btn" class="header-btn">Exporter</button>
          <button id="delete-btn" class="header-btn">Supprimer</button>
        </div>
      </header>
      <!-- Navigation between ateliers -->
      <nav id="tabs">
        <a href="atelier1.html" class="tab-btn">AtelierÂ 1</a>
        <a href="atelier2.html" class="tab-btn">AtelierÂ 2</a>
        <a href="atelier3.html" class="tab-btn">AtelierÂ 3</a>
        <a href="atelier4.html" class="tab-btn active">AtelierÂ 4</a>
        <a href="atelier5.html" class="tab-btn">AtelierÂ 5</a>
      </nav>
      <!-- AtelierÂ 4: ScÃ©narios opÃ©rationnels -->
      <section id="atelier4" class="tab-content active">
        <div class="atelier-grid">
          <div class="left">
            <h2>AtelierÂ 4Â â€“Â ScÃ©narios opÃ©rationnels</h2>
            <p>Pour chaque scÃ©nario opÃ©rationnel, reliez un <strong>Ã©vÃ¨nement redoutÃ©</strong> Ã  un <strong>chemin dâ€™attaque stratÃ©gique</strong> issu de lâ€™atelierÂ 3, puis dÃ©crivez les Ã©tapes de la cyberâ€¯killâ€¯chain (ConnaÃ®tre, Rester, Trouver, Exploiter). Vous pouvez associer un ou plusieurs risques Ã  chaque scÃ©nario et prÃ©ciser pour chacun la vraisemblance et la gravitÃ© (Ã©chelleÂ 1 Ã Â 4).</p>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.8rem;">
              <div class="table-container" style="overflow-x:auto; flex:1;">
              <table id="ops-table" class="data-table" style="min-width:100%;">
                <thead>
                  <tr>
                    <th>Ã‰vÃ¨nement</th>
                    <th>Chemin stratÃ©gique</th>
                    <th>Risques</th>
                    <th><span class="col-title">ConnaÃ®tre</span> <span class="col-toggle" data-col="connaitre">ğŸ‘ï¸</span></th>
                    <th><span class="col-title">Rester</span> <span class="col-toggle" data-col="rester">ğŸ‘ï¸</span></th>
                    <th><span class="col-title">Trouver</span> <span class="col-toggle" data-col="trouver">ğŸ‘ï¸</span></th>
                    <th><span class="col-title">Exploiter</span> <span class="col-toggle" data-col="exploiter">ğŸ‘ï¸</span></th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="ops-body"></tbody>
              </table>
              </div>
            </div>
            <button id="add-op-btn" class="add-item-btn">+ Ajouter un scÃ©nario opÃ©rationnel</button>
          </div>
          <div class="chart-wrapper">
            <canvas id="atelier4-chart" width="600" height="400" class="chart-canvas"></canvas>
          </div>
        </div>
      </section>
    </main>
  </div>
  <script src="app.js"></script>
  <!-- Modal for selecting risks from the MITRE CSV -->
  <div id="risk-modal" class="modal" style="display:none">
    <div class="modal-content">
      <h3>Ajouter un risque (MITRE)</h3>
      <input id="risk-search" type="text" placeholder="Rechercher..." style="width:100%; margin-bottom:0.5rem;" />
      <div class="risk-table-container">
        <table id="risk-table" class="risk-table">
          <thead>
            <tr><th>Technique ID</th><th>Technique Name</th><th>Technique Description</th></tr>
          </thead>
          <tbody id="risk-table-body"></tbody>
        </table>
      </div>
      <div id="risk-selected" class="risk-selected"></div>
      <div style="margin-top:0.6rem; display:flex; gap:0.5rem;">
        <button id="risk-select-apply" class="add-item-btn">Ajouter la sÃ©lection</button>
        <button id="risk-close-btn" class="header-btn" style="flex:1;">Fermer</button>
      </div>
    </div>
  </div>
</body>
</html>